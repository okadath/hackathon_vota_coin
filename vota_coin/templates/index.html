{% load static %}

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Creative Tim">
    <title>Spanish Link</title>
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <!--  Social tags      -->


<!-- <script src="js/require.js"></script> -->
    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
    <!-- Icons -->
<!--     <link rel="stylesheet" href="{% static 'assets/vendor/nucleo/css/nucleo.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'assets/vendor/fontawesome/fontawesome-free/css/all.min.css' %}" type="text/css">
 
    <link rel="stylesheet" href="  {% static 'assets/css/argon.min.css' %}" type="text/css">
    Google Tag Manager -->
  <!-- <script src="./dist/bundle.js" type="module"></script> -->

<!-- <script type="module" src="index.js"></script>  -->
    <!-- End Google Tag Manager -->
</head>

<body class="bg-gradient-white">
    <!-- Google Tag Manager (noscript) -->
    <!-- End Google Tag Manager (noscript) -->
    <!-- Navbar -->


    <!-- mi mierda -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css"> -->
        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.3/dist/css/bulma-carousel.min.css"> -->

<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
        crossorigin="anonymous">
<!-- <script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script> -->
<!-- <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script> -->
{% include './navbar.html' %}

<section class="section">
    <div class="container">
        <h1 class="title">
            Vota Demo
        </h1>
        <nav class="panel">
          <p class="panel-heading">
            Votacion para holders
        </p>
        {% if error_messages %}
        <div class="alert alert-danger">
            <strong>{{ error_messages }}</strong>
        </div>
        {% endif %}
        <!-- <form method="post" action="{% url 'login_func' %}"> -->
            <!-- {% csrf_token %} -->
            <div class="panel-block">
                <div class="field">

                    <div class="field is-grouped">
                      <div class="control">  
                        <button  type="submit" class="button is-success enableEthereumButton"> Enable Ethereum</button>
                        <button class="sendEthButton button is-info">Send Eth</button>

                        <h2>Account: <span class="showAccount"></span></h2>
                        </div>
                    <br>

                    <button id="connectButton" class="button is-info" onclick="bundle.connect()">Connect</button>
                    <button id="executeButton" class="button is-success" onclick="bundle.execute()">Execute</button>
                    <button id="asd" class="button is-success" onclick="bundle.s()">test</button>


                    </div>
                </div>
            </div>
        <!-- </form> -->
        </nav>

<!-- in server -->
                  <script src="http://127.0.0.1:8000/static/bundle.js" type="module"></script>
<!-- in local js -->
                  <!-- <script src="./dist/bundle.js" type="text/javascript"></script> -->



<script type="text/javascript">
// // In Node.js, con el cdn se inicializa solo
// // const Web3 = require('web3');

// const web33 = new Web3('https://rpc.api.moonbase.moonbeam.network'); 
// console.log(web33);


// const ethereumButton = document.querySelector('.enableEthereumButton');
// const showAccount = document.querySelector('.showAccount');

// ethereumButton.addEventListener('click', () => {
//   const acc=getAccount();
//   printAccount(acc);

// });


// // const ethereumButton = document.querySelector('.enableEthereumButton');
// const sendEthButton = document.querySelector('.sendEthButton');

// let accounts = [];

// //Sending Ethereum to an address
// sendEthButton.addEventListener('click', () => {
//   ethereum
//     .request({
//       method: 'eth_sendTransaction',
//       params: [
//         {
//           from: accounts[0],
//           to: '0x518561C267F8ac931c40284c1aa06E824BABE434',//cuenta 2
//           value: '0x429D069189E0000',//3**16 0x
//           gasPrice: '0x09184e72a000',
//           gas: '0x2710',
//         },
//       ],
//     })
//     .then((txHash) => console.log(txHash))
//     .catch((error) => console.error);
// });

// // ethereumButton.addEventListener('click', () => {
// //   getAccount();
// // });

// // async function getAccount() {
// //   accounts = await ethereum.request({ method: 'eth_requestAccounts' });
// // }


// async function getAccount() {
//   const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
//   const account = accounts[0];
//   showAccount.innerHTML = account;
//   return account
// }

// async function printAccount(account) {
// console.log(account);

// }

</script>

 
        <nav class="panel">
          <p class="panel-heading">
            Votacion con registro 
        </p>
        {% if error_messages %}
        <div class="alert alert-danger">
            <strong>{{ error_messages }}</strong>
        </div>
        {% endif %}
        <form method="post" action="{% url 'login_func' %}">
            {% csrf_token %}
            <div class="panel-block">
                <div class="field">
                    <label class="label">Email</label>
                    <div class="control has-icons-left has-icons-right">
                        <input class="input is-success" type="email" placeholder="Email" name="id_email" id="id_email" >
                        <span class="icon is-small is-left">
                            <i class="fas fa-user"></i>
                        </span>
                    </div>

                    <label class="label">Password</label>
                    <div class="control has-icons-left has-icons-right">
                        <input class="input is-success" type="password" placeholder="Password" name="id_password" id="id_password" >
                        <span class="icon is-small is-left">
                            <i class="fas fa-lock"></i>
                        </span>
                    </div>
                    <br>
                    <div class="field is-grouped">
                      <div class="control"> 
                        <button class="button is-link" type="submit" >Login</button>
                        <button class="button is-success" type="submit" >No tienes cuenta? Registrate</button>

                    </div>
                    <br>
 
                    </div>

                </div>
            </div>
        </form>
        </nav>
        {{user}}
   





        <nav class="panel">
          <p class="panel-heading">
            Votacion libre
        </p>
        {% if error_messages %}
        <div class="alert alert-danger">
            <strong>{{ error_messages }}</strong>
        </div>
        {% endif %}
        <form method="post" action="{% url 'login_func' %}">
            {% csrf_token %}
            <div class="panel-block">
                <div class="field">
                   


<div style="display: flex; flex-direction: row; flex-wrap: wrap">
  {% for card in votings %} 
  <div class="card" style="width: 18rem; margin: 10px"> 
    <div class="card-body">
      <div style="display: flex; flex-direction: row">
        <h5 class="card-title">{{ card.name }}</h5> 
      </div>
      <p class="card-text">{{ card.description }}</p>
      <p>Votos:{{card.points_free}}</a>
        <br>
      <a href="{% url 'free_vote'  card.id %} " class="btn btn-primary">Votar</a>
      <!-- <a href="/command/{{ card.id }}/delete" class="btn btn-primary">Delete</a> -->
    </div>
  </div>
  {% endfor %}

</div>





                </div>
            </div>
        </form>
 
        </nav>
         </div>
</section>


<script type="text/javascript">
    if (typeof window.ethereum !== 'undefined') {
      console.log('MetaMask is installed!');
  }
  else{
      console.log('install MetaMask!');
  }

</script>


<!-- <script type="module" src="./static/src.a2b27638.js"></script>  -->



</html>


